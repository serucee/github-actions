name: Create release # name displayed in the web interface
# does not get triggered for whatever reason unless directly using
# git tag ***
# git push origin ***
#on:
#  push:
#    branches:
#      - 'refs/tags/*'

on:
  create
#deployment

#on:
#  push:
#    branches:
#    - '*/refs/tags/*'
jobs: # contains all jobs
  prepare:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        if: startsWith(github.ref, 'refs/tags/')
        uses: actions/checkout@v1
      - name: Build Package
        if: startsWith(github.ref, 'refs/tags/')
        run: zip -r package.zip collection
      - name: Create release notes
        if: startsWith(github.ref, 'refs/tags/')
        run: echo "test body generated by a script (action)" > body.md # use our current script to create those
      - name: GH Release
        if: startsWith(github.ref, 'refs/tags/')
        uses: softprops/action-gh-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          files: package.zip
          body_path: body.md